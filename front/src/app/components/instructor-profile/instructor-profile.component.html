<div class="container rounded bg-white mt-5 mb-5">
    <div class="row">
    
        <div class="col-md-5 border-right">
            <div class="p-1 py-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h4 class="text-right">Edit Profile</h4>
                </div>
                <form class="content" [formGroup]="editInstructorForm" (ngSubmit)="submitData()">
                <div class="row mt-2">
                    <div class="col-md-6"><label class="labels">First name:</label><input type="text" formControlName="firstName" [(ngModel)]="instructorChange.firstName"  class="form-control" placeholder="First Name"/>
                        <div *ngIf="firstName.invalid && (firstName.touched || firstName.dirty)">
                            <span class="error" *ngIf="firstName.errors?.required" style="color: red;">First Name is required</span>
                            <span class="error" *ngIf="firstName.errors?.pattern" style="color: red;">Only letters allowed.First letter must be capital.</span>
                        </div>
                    </div>
                    <div class="col-md-6"><label class="labels">Last name:</label><input type="text" formControlName="lastName" [(ngModel)]="instructorChange.lastName"  class="form-control" placeholder="Last Name"/>
                        <div *ngIf="lastName.invalid && (lastName.touched || lastName.dirty)">
                            <span class="error" *ngIf="lastName.errors?.required" style="color: red;">Last Name is required</span>
                            <span class="error" *ngIf="lastName.errors?.pattern" style="color: red;">Only letters allowed.First letter must be capital.</span>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-12"><label class="labels">Mobile number:</label><input type="text" formControlName="mobileNumber" [(ngModel)]="instructorChange.mobileNumber"  class="form-control" placeholder="Mobile number"/>
                        <div *ngIf="mobileNumber.invalid && (mobileNumber.touched || mobileNumber.dirty)">
                            <span class="error" *ngIf="mobileNumber.errors?.required" style="color: red;">Mobile number is required</span>
                            <span class="error" *ngIf="mobileNumber.errors?.pattern" style="color: red;">Only numbers allowed</span>
                        </div>
                    </div>
                    <div class="col-md-12"><label class="labels">Address:</label> <input type="text" formControlName="address" [(ngModel)]="instructorChange.address"  class="form-control" placeholder="Address"/>
                        <div *ngIf="address.invalid && (address.touched || address.dirty)">
                            <span class="error" *ngIf="address.errors?.required" style="color: red;">Address is required</span>
                            <span class="error" *ngIf="address.errors?.pattern" style="color: red;">Enter valid address </span>
                        </div>
                    </div>
                    <div class="col-md-12"><label class="labels">Contry:</label><input type="text" formControlName="country" [(ngModel)]="instructorChange.country"  class="form-control" placeholder="Country"/>
                        <div *ngIf="country.invalid && (country.touched || country.dirty)">
                            <span class="error" *ngIf="country.errors?.required" style="color: red;">Country is required</span>
                            <span class="error" *ngIf="country.errors?.pattern" style="color: red;">Only letters allowed.First letter must be capital.</span>
                        </div>
                    </div>
                    <div class="col-md-12"><label class="labels">E-mail:</label><input type="text"  [value]="instructorChange.email" class="form-control" placeholder="E-mail" disabled/>
                        
                    </div>
                    <div class="col-md-12"><label class="labels">City:</label><input type="text" formControlName="city" [(ngModel)]="instructorChange.city"  class="form-control" placeholder="City"/>
                        <div *ngIf="city.invalid && (city.touched || city.dirty)">
                            <span class="error" *ngIf="city.errors?.required" style="color: red;">City is required</span>
                            <span class="error" *ngIf="city.errors?.pattern" style="color: red;">Only letters allowed.First letter must be capital.</span>
                        </div>
                    </div>
                    <div class="col-md-12"><label class="labels">Reason:</label><input type="text" formControlName="reason" [(ngModel)]="instructorChange.reason"  class="form-control" placeholder="Reason of registration"/>
                        <div *ngIf="reason.invalid && (reason.touched || reason.dirty)">
                            <span class="error" *ngIf="reason.errors?.required " style="color: red;">Reason is required</span>
                            <span class="error" *ngIf="reason.errors?.pattern" style="color: red;">Only letters allowed</span>
                        </div>
                    </div>
                    <div class="col-md-12"><label class="labels">Current password</label><input type="password" formControlName="password" [(ngModel)]="instructorChange.password"  class="form-control" placeholder="Password"/>
                        <div *ngIf="password.invalid && (password.touched || password.dirty)">
                            <span class="error" *ngIf="password.errors?.required" style="color: red;">Password is required</span>
                            <span class="error" *ngIf="password.errors?.pattern" style="color: red;">Only letters allowed</span>
                        </div>
                        <div *ngIf="wrongPassword1">
                            <span class="error" style="color: red;">Password is wrong</span>
                        </div>
                    </div>
                    <div class="mt-5 text-center"><button class="btn btn-primary profile-button" [disabled]="editInstructorForm.invalid">Edit Profile</button></div>
                    
                </div>
            </form>
                <form class="content" [formGroup]="editPasswordForm" (ngSubmit)="submitPassword()">
                <div class="row mt-3">
                    <div class="col-md-12"><label class="labels">Current password</label><input type="password" formControlName="currentPassword"  class="form-control" placeholder="Password"/>
                        <div *ngIf="currentPassword.invalid && (currentPassword.touched || currentPassword.dirty)">
                            <span class="error" *ngIf="currentPassword.errors?.required" style="color: red;">Password is required</span>
                            <span class="error" *ngIf="currentPassword.errors?.pattern" style="color: red;">Only letters allowed</span>
                        </div>
                        <div *ngIf="wrongPassword">
                            <span class="error" style="color: red;">Password is wrong</span>
                        </div>
                    </div>
                    <div class="col-md-12"><label class="labels">New password</label><input type="password" formControlName="newPassword" [(ngModel)]="passwordChange.password"  class="form-control" placeholder="Password"/>
                        <div *ngIf="newPassword.invalid && (newPassword.touched || newPassword.dirty)">
                            <span class="error" *ngIf="newPassword.errors?.required" style="color: red;">Password is required</span>
                            <span class="error" *ngIf="newPassword.errors?.pattern" style="color: red;">Only letters allowed</span>
                        </div>
                    </div>
                    <div class="col-md-12"><label class="labels">Repeat new password</label><input type="password" formControlName="newPassword1" (focusout)="validatePass()"  class="form-control" placeholder="Password"/>
                        <div *ngIf="newPassword1.invalid && (newPassword1.touched || newPassword1.dirty)">
                            <span class="error" *ngIf="newPassword1.errors?.required" style="color: red;">Password is required</span>
                            <span class="error" *ngIf="newPassword1.errors?.pattern" style="color: red;">Only letters allowed</span>
                        </div>
                        <div *ngIf="wrongPassword2">
                            <span class="error" style="color: red;">Passwords are not the same</span>
                        </div>
                    </div>
                </div>
                <div class="mt-5 text-center"><button class="btn btn-primary profile-button" [disabled]="editPasswordForm.invalid">Edit Password</button></div>
                </form>
                
                
            </div>
            <div class="col-md-12"><label class="labels">Reason:</label><input type="text" id="reasonOfDelete" class="form-control" placeholder="Reason of request"/>
            </div>
            <button (click)="requestDelete()" class="list-item btn btn-primaty bg-danger btn-lg text-white">Request account delete</button>
            <div *ngIf="alreadySent">
                <span class="error" style="color: red;">Already sent</span>
            </div>
            
        </div>
    


        <div class="col">
            <div class="p-1 pt-5 mt-5 py-5 row">

                <div class="page-content page-container col" id="page-content">
                        <div class="row">
                            
                            <div class="col">
                                <div class="container-fluid d-flex justify-content-center">
                                    <div class="list list-row card" >
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead class="thead-light">
                                                    <tr>
                                                        <th scope="col">Image</th>
                                                        <th scope="col">Name</th>
                                                        <th scope="col">Address</th>
                                                        <th scope="col">Description</th>
                                                        <th scope="col">Cost</th>
                                                    </tr>
                                                </thead>
                                                <tbody *ngFor="let item of searchFavors;let indexOfelement=index;">
                                                    <tr>
                                                        <td><div (click)="goToFavorProfile(item?.id)"><span class="w-80 avatar gd-info"><img *ngIf="item?.images != null" style="width:120px;height:80px;"  [src]="('../../assets/images/' + item?.images[0] +'.jpg')" alt="."><img *ngIf="item?.images == null" style="width:120px;height:80px;"  src="../../assets/images/undefined.jpg" alt="."></span></div></td>
                                                        <td scope="col">{{item.name}}</td>
                                                        <td scope="col">{{item.address}}</td>
                                                        <td scope="col">{{item.description}}</td>
                                                        <td scope="col">{{item.cost}}</td>
                                                        <td> <button class="btn btn-danger" (click)="removeFavor(indexOfelement)"> Remove </button> </td> 
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <p *ngIf="errorMessage" style="color: red; font-size: 20px;"> Favor is reserved! </p>
                                        </div>        
                                        <button (click)="addNewFavor()" class="list-item btn btn-primaty bg-success btn-lg text-white">Add new favor</button>
                                        <div class="list-item" style="margin-top: 30px;">
                                            <input type="text" class="form-control" placeholder="Favor Name" id="searchFavorsName"/>    
                                           
                                        </div>
                                        <div class="list-item">
                                            <input type="number" class="form-control" placeholder="Num of persons" id="searchNumOfPersons"/>    
                                           
                                        </div>
                                        <div class="list-item">
                                            <input type="text" class="form-control" placeholder="Favor Address" id="searchFavorsAddress"/>    
                                            
                                        </div>
                                        <div class="list-item">
                                            <input type="number" class="form-control" placeholder="Favor Cost" id="searchFavorsCost"/>    
                                            
                                        </div>
                                        
                                        <div class="list-item">
                                            <input type="text" class="form-control" placeholder="Favor Description" id="searchFavorsDescription"/>    
                                           
                                        </div>
                                        <div class="list-item">
                                            <input type="text" class="form-control" placeholder="Favor Rules" id="searchFavorsRules"/>    
                                           
                                        </div>
                                        <div class="list-item">
                                            <input type="text" class="form-control" placeholder="Favor Services" id="searchFavorsServices"/>    
                                           
                                        </div>
                                        <button (click)="SearchCottages()" class="list-item btn btn-primaty bg-success btn-lg text-white">Search favor</button>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
               
            </div>
            
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body text-center">
                    <h5 class="card-title m-b-0">Reservations</h5>
                </div>
                <div class="table-responsive">
                    <form class="content" [formGroup]="addReservationForm1" (ngSubmit)="submitForm()">
                        <table class="table">
                            <thead class="thead-light">
                                <tr >
                                    <th scope="col">From</th>
                                    <th scope="col">To</th>
                                    <th scope="col">Cost</th>
                                    <th scope="col">Client</th>
                                    <th scope="col">Address</th>
                                    <th scope="col">Name</th>
                                </tr>
                            </thead>
                            <tbody *ngFor="let item of instructorReservations">
                                <tr (click)="getClient(item.client.email,item.availableFrom,item.availableTill,item.id)" [id]="[item.client.id]">
                                    <td scope="col">{{item.availableFrom}}</td>
                                    <td scope="col">{{item.availableTill}}</td>
                                    <td scope="col">{{item.cost}}</td>
                                    <td scope="col">{{item.client.firstName}} {{item.client.lastName}}</td>
                                    <td scope="col">{{item.favor.address}}</td>
                                    <td scope="col">{{item.favor.name}}</td>
                                    <td scope="col"> <button type="button" (click)="seeUserProfile(item.client.email)" class="btn btn-primary btn-md mr-1 mb-2">See profile</button></td>
                                    <td scope="col" *ngIf="doesReportExists(item)"> <button type="button" (click)="addReport(item)" class="btn btn-primary btn-md mr-1 mb-2">Add report</button></td>
                                </tr>
                            </tbody>
                            <tbody>
                                <tr >
                                    <td><input style="width: 85%;" [(ngModel)]="newReservation1.availableFrom" formControlName="availableFrom1" class="form-control"  type="datetime-local" id="availableFrom1" >
                                        <div *ngIf="availableFrom1.invalid && (availableFrom1.touched || availableFrom1.dirty)">
                                        <span class="error" *ngIf="availableFrom1.errors?.required" style="color: red;">From is required</span>
                                        </div>
                                    </td>
                                    <td><input style="width: 85%;" [(ngModel)]="newReservation1.availableTill" formControlName="availableTill1" class="form-control"  type="datetime-local" id="availableTo1">
                                        <div *ngIf="availableTill1.invalid && (availableTill1.touched || availableTill1.dirty)">
                                        <span class="error" *ngIf="availableTill1.errors?.required" style="color: red;">To is required</span>
                                    </div>
                                    <div *ngIf="availableTillError">
                                        <span class="error" style="color: red;">Till must me greater than from</span>
                                    </div>
                                    </td>
                                    <td><input style="width: 60%;" [(ngModel)]="newReservation1.cost" formControlName="cost1" class="form-control" type="number"/>
                                        <div *ngIf="cost1.invalid && (cost1.touched || cost1.dirty)">
                                        <span class="error" *ngIf="cost1.errors?.required" style="color: red;">Cost per night is required</span>
                                        <span class="error" *ngIf="cost1.errors?.pattern" style="color: red;">Only numbers allowed</span>
                                    </div>
                                    </td>
                                    <td scope="col">{{newReservation1?.client?.firstName}} {{newReservation1?.client?.lastName}}</td>
                                    <td scope="col">{{newReservation1?.favor?.address}}</td>
                                    <td scope="col">{{newReservation1?.favor?.name}}</td>
                                    <td>
                                        <button [disabled]="addReservationForm1.invalid" class="btn btn-primary btn-md mr-1 mb-2">Add</button>
                                        <div *ngIf="pickedUserError">
                                            <span class="error" style="color: red;">Pick a user</span>
                                        </div>
                                        <div *ngIf="isReserved1">
                                            <span class="error" style="color: red;">Term is busy</span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body text-center">
                    <h5 class="card-title m-b-0">Report</h5>
                </div>
                <div class="col">
                    <div class="row align-items-center">
                        <div class="col-sm"></div>
                        <div class="col-sm"></div>
                        <h5 class="col-sm"> From:</h5> <input class="form-control col-sm" (value)="datumFrom"  [value]="datumFromString" placeholder="from"  type="date" id="from"/>
                        <div class="col-sm"></div>
                        <div class="col-sm"></div>
                    </div>
                    <div class="row align-items-center">
                        <div class="col-sm"></div>
                        <div class="col-sm"></div>
                        <h5 class="col-sm"> To:</h5> <input class="form-control col-sm" style="width: 50%;" (value)="datumTo"  [value]="datumToString" placeholder="to"  type="date" id="to"/>
                        <div class="col-sm"></div>
                        <div class="col-sm"></div>
                    </div>
                    <div class="row align-items-center">
                        <div class="col-sm"></div>
                        
                            <button (click)="showReport()" class="list-item btn btn-primary bg-danger btn-lg text-white col-sm">Send</button>
                        
                        <div class="col-sm"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
