<div>
    <h1 style="text-align: center;">Cottages page</h1>
</div>

<br><br>

<div class="row">
    <div class="column">
        <h4>Search available cottages</h4>
        <form (ngSubmit)="searchCottages()">
            <label style="min-width: 15%;">Start date:</label>
            <input type="date" id="startDate" min="{{today}}" value={{today}} onkeydown="return false" style="min-width: 20%;" required><br>
            
            <label style="min-width: 15%;">End date:</label>
            <input type="date" id="endDate" min="{{today}}" value={{today}} onkeydown="return false" style="min-width: 20%;" required><br>
        
            <button type="submit">Find available cottages</button><br><br>
        </form>
        <button (click)='getAllCottages()'>Show all cottages</button>
    </div>
    <div class="column" *ngIf='canFilter'>
        <label>Filter by cost and/or grade:</label> <br>
        <label style="min-width: 20%; text-align: center;">(Cost) From:</label><input type="number" id="filterCostFrom" min=0 max=1000 value=0 style="min-width: 15%;">
        <label style="min-width: 5%; text-align: center;">To:</label><input type="number" id="filterCostTo" min=0 max=1000 value=1000 style="min-width: 15%;">
        <button (click)='filterByCostAndGrade()'>Filter</button>
        <br>
        <label style="min-width: 20%; text-align: center;">(Grade) From:</label><input type="number" id="filterGradeFrom" min=0 max=10 value=0 step="0.1" style="min-width: 15%;">
        <label style="min-width: 5%; text-align: center;">To:</label><input type="number" id="filterGradeTo" min=0 max=10 value=10 step="0.1" style="min-width: 15%;">
        <button (click)='filterByCostAndGrade()'>Filter</button>
    </div>
</div>
<br>
<table style="width: 100%;">
    <thead>
        <th (click)="sortByName()" style="cursor: pointer;">Name</th>
        <th (click)="sortByAddress()" style="cursor: pointer;">Address</th>
        <th (click)="sortByDescription()" style="cursor: pointer;">Description</th>
        <th (click)="sortByCost()" style="cursor: pointer;">Cost per night</th>
        <th (click)="sortByGrade()" style="cursor: pointer;">Grade</th>
        <th></th>
    </thead>
    <tbody>
        <tr *ngFor='let c of cottages'>
            <td>{{c.cottage.name}}</td>
            <td>{{c.cottage.address}}</td>
            <td>{{c.cottage.description}}</td>
            <td>{{c.cottage.costPerNight}}</td>
            <td>{{c.averageGrade | number: '1.1-2'}}</td>
            <td><a href="#" (click)="goToCottageProfile(c.cottage.id)">More details</a></td>
        </tr>
    </tbody>
</table>